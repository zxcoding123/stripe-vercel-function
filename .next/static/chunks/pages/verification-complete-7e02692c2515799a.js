(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{5829:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verification-complete",function(){return t(4040)}])},4040:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return VerificationComplete}});var n=t(5893),i=t(7294),o=t(1163),c=t(5675),s=t.n(c);function VerificationComplete(){(0,o.useRouter)();let[e,r]=(0,i.useState)("loading"),[t,c]=(0,i.useState)(""),[a,l]=(0,i.useState)(null),u=(0,i.useRef)(null),d=(0,i.useRef)(null),f=(0,i.useRef)(null);(0,i.useEffect)(()=>{let checkVerificationStatus=async()=>{let e=new AbortController;f.current=e;try{let t=await fetch("/api/check-verification",{credentials:"include",signal:e.signal});if(400===t.status){let e=await t.json();r("error"),c(e.error||"Session expired or not found. Please start over.");return}if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let n=await t.json();switch(console.log("API Response:",n),n.status){case"verified":r("success"),c("Your identity has been successfully verified!");let i="/form-instructions?product=".concat(encodeURIComponent(n.product||""));l(5),u.current=setInterval(()=>{l(e=>null===e?null:e<=1?(clearInterval(u.current),u.current=null,window.location.href=i,0):e-1)},1e3),d.current&&clearInterval(d.current);break;case"requires_input":r("pending"),c("Additional information required. Please check your email."),d.current&&clearInterval(d.current);break;case"processing":r("pending"),c("Your verification is being processed...");break;case"canceled":r("error"),c("Verification was canceled."),d.current&&clearInterval(d.current);break;default:r("pending"),c("Status: ".concat(String(n.status)))}}catch(e){"AbortError"!==e.name&&(console.error("Verification check failed:",e),r("error"),c("Error checking verification status. Please try again later."),d.current&&clearInterval(d.current))}};return checkVerificationStatus(),d.current=setInterval(checkVerificationStatus,3e3),()=>{f.current&&f.current.abort(),u.current&&clearInterval(u.current),d.current&&clearInterval(d.current)}},[]);let p={padding:"1.5rem",borderRadius:"12px",marginTop:"1rem",background:"#ffffff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"};return(0,n.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#0f2c76",color:"#ffffff",fontFamily:"'Playfair Display', serif",textAlign:"center",padding:"2rem"},children:[(0,n.jsx)(s(),{src:"/gtr_logo.png",alt:"GetTaxRelief Logo",width:150,height:50,style:{marginBottom:"2rem"},priority:!0}),(0,n.jsx)("h1",{style:{color:"#ddc946",marginBottom:"1.5rem"},children:"Verification Status"}),"loading"===e&&(0,n.jsx)("p",{children:"Checking verification status..."}),"success"===e&&(0,n.jsxs)("div",{style:{...p,border:"2px solid #0f2c76",color:"#0f2c76",maxWidth:"500px"},children:[(0,n.jsx)("h3",{children:"✅ Success!"}),(0,n.jsx)("p",{children:t}),"number"==typeof a&&(0,n.jsxs)("p",{style:{marginTop:"1rem",fontSize:"0.95rem",color:"#666"},children:["Redirecting you in ",a," second",1===a?"":"s","..."]})]}),"pending"===e&&(0,n.jsxs)("div",{style:{...p,border:"2px solid #ddc946",color:"#ddc946",maxWidth:"500px"},children:[(0,n.jsx)("h3",{children:"⏳ Processing"}),(0,n.jsx)("p",{children:t})]}),"error"===e&&(0,n.jsxs)("div",{style:{...p,border:"2px solid red",color:"red",maxWidth:"500px"},children:[(0,n.jsx)("h3",{children:"❌ Error"}),(0,n.jsx)("p",{children:t}),(0,n.jsx)("button",{onClick:()=>{document.cookie="verification_session=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href="/verification-start"},style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#0f2c76",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Restart Verification"})]}),(0,n.jsx)("div",{style:{marginTop:"2rem"},children:(0,n.jsx)("button",{onClick:()=>window.location.href="https://www.gettaxreliefnow.com",style:{padding:"0.75rem 1.5rem",fontSize:"1rem",cursor:"pointer",borderRadius:"8px",border:"none",backgroundColor:"#ddc946",color:"#0f2c76",fontWeight:"bold",transition:"all 0.3s ease"},children:"Return to Home"})})]})}},1163:function(e,r,t){e.exports=t(9974)}},function(e){e.O(0,[774,675,888,179],function(){return e(e.s=5829)}),_N_E=e.O()}]);