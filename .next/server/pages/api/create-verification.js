"use strict";(()=>{var e={};e.id=946,e.ids=[946],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6090:e=>{e.exports=import("stripe")},1022:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>u,default:()=>l,routeModule:()=>d});var s=r(1802),i=r(7153),o=r(6249),n=r(2998),c=e([n]);n=(c.then?(await c)():c)[0];let l=(0,o.l)(n,"default"),u=(0,o.l)(n,"config"),d=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/create-verification",pathname:"/api/create-verification",bundlePath:"",filename:""},userland:n});a()}catch(e){a(e)}})},2998:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>handler});var s=r(6090),i=e([s]);s=(i.then?(await i)():i)[0];let o=new s.default(process.env.STRIPE_SECRET_KEY);async function handler(e,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","POST, OPTIONS"),"OPTIONS"===e.method)return t.status(200).end();if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let{sessionId:r}=e.body;if(!r)return t.status(400).json({error:"Missing sessionId"});let a=await o.checkout.sessions.retrieve(r),s=await o.identity.verificationSessions.create({type:"document",metadata:{customer_email:a.customer_email},return_url:"http://localhost:3000/verification-success"});t.status(200).json({url:s.url})}catch(e){console.error("Error:",e.message),t.status(500).json({error:e.message})}}a()}catch(e){a(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[222],()=>__webpack_exec__(1022));module.exports=r})();