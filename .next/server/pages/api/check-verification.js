"use strict";(()=>{var e={};e.id=284,e.ids=[284],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6090:e=>{e.exports=import("stripe")},5533:(e,t,a)=>{a.a(e,async(e,i)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>d,routeModule:()=>l});var r=a(1802),s=a(7153),n=a(6249),o=a(6273),c=e([o]);o=(c.then?(await c)():c)[0];let d=(0,n.l)(o,"default"),u=(0,n.l)(o,"config"),l=new r.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/check-verification",pathname:"/api/check-verification",bundlePath:"",filename:""},userland:o});i()}catch(e){i(e)}})},6273:(e,t,a)=>{a.a(e,async(e,i)=>{try{a.r(t),a.d(t,{default:()=>handler});var r=a(6090),s=e([r]);r=(s.then?(await s)():s)[0];let n=new r.default(process.env.STRIPE_SECRET_KEY);async function handler(e,t){try{let{verification_session:a}=e.query;if(!a)return t.status(400).json({error:"Missing verification_session"});let i=await n.identity.verificationSessions.retrieve(a);t.status(200).json({id:i.id,status:i.status,verified:"verified"===i.status,product:i.metadata?.product,email:i.metadata?.email})}catch(e){console.error("check-verification error:",e),t.status(500).json({error:e.message})}}i()}catch(e){i(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222],()=>__webpack_exec__(5533));module.exports=a})();