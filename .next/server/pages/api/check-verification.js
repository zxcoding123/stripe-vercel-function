"use strict";(()=>{var e={};e.id=284,e.ids=[284],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4014:e=>{e.exports=import("iron-session")},6090:e=>{e.exports=import("stripe")},5533:(e,t,i)=>{i.a(e,async(e,r)=>{try{i.r(t),i.d(t,{config:()=>u,default:()=>d,routeModule:()=>l});var a=i(1802),s=i(7153),o=i(6249),n=i(6273),c=e([n]);n=(c.then?(await c)():c)[0];let d=(0,o.l)(n,"default"),u=(0,o.l)(n,"config"),l=new a.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/check-verification",pathname:"/api/check-verification",bundlePath:"",filename:""},userland:n});r()}catch(e){r(e)}})},6273:(e,t,i)=>{i.a(e,async(e,r)=>{try{i.r(t),i.d(t,{default:()=>handler});var a=i(6090),s=i(6713),o=e([a,s]);[a,s]=o.then?(await o)():o;let n=new a.default(process.env.STRIPE_SECRET_KEY);async function handler(e,t){try{let i=e.cookies.verification_session;if(!i)return t.status(400).json({error:"No verification session found"});let r=await (0,s.g)(i),a=Date.now()-r.createdAt;if(a>36e5)return t.status(400).json({error:"Session expired"});let o=await n.identity.verificationSessions.retrieve(r.verificationSessionId);t.status(200).json({id:o.id,status:o.status,verified:"verified"===o.status,product:r.product,email:r.email})}catch(e){console.error("check-verification error:",e),t.status(500).json({error:e.message})}}r()}catch(e){r(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),i=t.X(0,[222,713],()=>__webpack_exec__(5533));module.exports=i})();